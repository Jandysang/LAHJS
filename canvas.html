<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<title>测试数据类型</title>
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;
		}
		html,body{
			width: 100%;
			height: 100%;
			overflow: hidden;
		}
	</style>
</head>
<body style="height:100%;">
	<canvas id="canDiv" style="height:100%;">
		您的浏览器不支持canvas
	</canvas>
	<script type="text/javascript">
		var digit =
		    [
		        [
		            [0,0,1,1,1,0,0],
		            [0,1,1,0,1,1,0],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [0,1,1,0,1,1,0],
		            [0,0,1,1,1,0,0]
		        ],//0
		        [
		            [0,0,0,1,1,0,0],
		            [0,1,1,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [1,1,1,1,1,1,1]
		        ],//1
		        [
		            [0,1,1,1,1,1,0],
		            [1,1,0,0,0,1,1],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,1,1,0],
		            [0,0,0,1,1,0,0],
		            [0,0,1,1,0,0,0],
		            [0,1,1,0,0,0,0],
		            [1,1,0,0,0,0,0],
		            [1,1,0,0,0,1,1],
		            [1,1,1,1,1,1,1]
		        ],//2
		        [
		            [1,1,1,1,1,1,1],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,1,1,0],
		            [0,0,0,1,1,0,0],
		            [0,0,1,1,1,0,0],
		            [0,0,0,0,1,1,0],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [0,1,1,1,1,1,0]
		        ],//3
		        [
		            [0,0,0,0,1,1,0],
		            [0,0,0,1,1,1,0],
		            [0,0,1,1,1,1,0],
		            [0,1,1,0,1,1,0],
		            [1,1,0,0,1,1,0],
		            [1,1,1,1,1,1,1],
		            [0,0,0,0,1,1,0],
		            [0,0,0,0,1,1,0],
		            [0,0,0,0,1,1,0],
		            [0,0,0,1,1,1,1]
		        ],//4
		        [
		            [1,1,1,1,1,1,1],
		            [1,1,0,0,0,0,0],
		            [1,1,0,0,0,0,0],
		            [1,1,1,1,1,1,0],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [0,1,1,1,1,1,0]
		        ],//5
		        [
		            [0,0,0,0,1,1,0],
		            [0,0,1,1,0,0,0],
		            [0,1,1,0,0,0,0],
		            [1,1,0,0,0,0,0],
		            [1,1,0,1,1,1,0],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [0,1,1,1,1,1,0]
		        ],//6
		        [
		            [1,1,1,1,1,1,1],
		            [1,1,0,0,0,1,1],
		            [0,0,0,0,1,1,0],
		            [0,0,0,0,1,1,0],
		            [0,0,0,1,1,0,0],
		            [0,0,0,1,1,0,0],
		            [0,0,1,1,0,0,0],
		            [0,0,1,1,0,0,0],
		            [0,0,1,1,0,0,0],
		            [0,0,1,1,0,0,0]
		        ],//7
		        [
		            [0,1,1,1,1,1,0],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [0,1,1,1,1,1,0],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [0,1,1,1,1,1,0]
		        ],//8
		        [
		            [0,1,1,1,1,1,0],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [1,1,0,0,0,1,1],
		            [0,1,1,1,0,1,1],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,0,1,1],
		            [0,0,0,0,1,1,0],
		            [0,0,0,1,1,0,0],
		            [0,1,1,0,0,0,0]
		        ],//9
		        [
		            [0,0,0,0],
		            [0,0,0,0],
		            [0,1,1,0],
		            [0,1,1,0],
		            [0,0,0,0],
		            [0,0,0,0],
		            [0,1,1,0],
		            [0,1,1,0],
		            [0,0,0,0],
		            [0,0,0,0]
		        ]//:
		    ];
		var WINDOW_WIDTH=1124,WINDDOW_HEIGHT=628,RADIUS=8,MARGIN_TOP=60,MARGIN_LEFT=30,RS=[],balls=[],colors=["#33b5e5","#0099cc","#aa66cc","#9933cc","#99cc00","#669900","#ffbb33","#ff8800","#ff4444","#cc0000"];
	</script>
	<script type="text/javascript">
			window.onload=function () {
				WINDOW_WIDTH=document.body.clientWidth;
				WINDDOW_HEIGHT=document.body.clientHeight;
				MARGIN_LEFT=Math.round(WINDOW_WIDTH/10);
				RADIUS=Math.round(WINDOW_WIDTH*4/5/108)-1;
				MARGIN_TOP=Math.round(WINDDOW_HEIGHT/5);
				var can=document.getElementById('canDiv');
				var context=can.getContext('2d');

				can.width=WINDOW_WIDTH;
				can.height=WINDDOW_HEIGHT;
				RS=getCurrentShowTimeSeconds();
				var intObj;

				intObj=setInterval(function(){
					render(RS[0],RS[1],RS[2],context);
					update();
				},50);
			};
			function render(hours,minutes,seconds,cxt){
				//var hours=12,minutes=34,seconds=56;
				cxt.clearRect(0,0,WINDOW_WIDTH,WINDDOW_HEIGHT);
				renderDigit(MARGIN_LEFT,MARGIN_TOP,parseInt(hours/10),cxt);
				renderDigit(MARGIN_LEFT+15*(RADIUS+1),MARGIN_TOP,parseInt(hours%10),cxt);
				renderDigit(MARGIN_LEFT+30*(RADIUS+1),MARGIN_TOP,10,cxt);
				renderDigit(MARGIN_LEFT+39*(RADIUS+1),MARGIN_TOP,parseInt(minutes/10),cxt);
				renderDigit(MARGIN_LEFT+54*(RADIUS+1),MARGIN_TOP,parseInt(minutes%10),cxt);
				renderDigit(MARGIN_LEFT+69*(RADIUS+1),MARGIN_TOP,10,cxt);
				renderDigit(MARGIN_LEFT+78*(RADIUS+1),MARGIN_TOP,parseInt(seconds/10),cxt);
				renderDigit(MARGIN_LEFT+93*(RADIUS+1),MARGIN_TOP,parseInt(seconds%10),cxt);

				for(var i=0;i<balls.length;i++){
					cxt.fillStyle=balls[i].color;
					cxt.beginPath();
					cxt.arc(balls[i].x,balls[i].y,RADIUS,0,2*Math.PI);
					cxt.closePath();
					cxt.fill();
				}
			}
			function renderDigit(x,y,num,cxt){
				cxt.fillStyle="rgb(0,102,153)";
				for(var i=0,len=digit[num].length;i<len;i++){
					for(var j=0,_len=digit[num][i].length;j<_len;j++){
						if(digit[num][i][j]===1){
							cxt.beginPath();
							cxt.arc(x+2*(j+1)*(RADIUS+1),y+2*(i+1)*(RADIUS+1),RADIUS,0,2*Math.PI);
							cxt.closePath();
							cxt.fill();
						}
					}
				}
			}
			function getCurrentShowTimeSeconds(){
				var CURRENT_TIME=new Date(),CURRENT_TIME_GEN,rs=[];
				CURRENT_TIME_GEN=new Date(CURRENT_TIME.getFullYear(),CURRENT_TIME.getMonth(),CURRENT_TIME.getDate(),0,0,0);
				rs.push(Math.floor((CURRENT_TIME.getTime()-CURRENT_TIME_GEN.getTime())/(1000*60*60)));
				rs.push(Math.floor((CURRENT_TIME.getTime()-CURRENT_TIME_GEN.getTime())/(1000*60))-rs[0]*60);
				rs.push(Math.floor((CURRENT_TIME.getTime()-CURRENT_TIME_GEN.getTime())/1000)-rs[0]*60*60-rs[1]*60);
				return rs;
			}
			function update(){
				var nextRS=getCurrentShowTimeSeconds();
				if(nextRS[2]!=RS[2]) {
					if(parseInt(nextRS[0]/10)!=parseInt(RS[0]/10)){
						addBalls(MARGIN_LEFT,MARGIN_TOP,parseInt(RS[0]/10));
					}
					if(parseInt(nextRS[0]%10)!=parseInt(RS[0]%10)){
						addBalls(MARGIN_LEFT+15*(RADIUS+1),MARGIN_TOP,parseInt(RS[0]%10));
					}
					if(parseInt(nextRS[1]/10)!=parseInt(RS[1]/10)){
						addBalls(MARGIN_LEFT+39*(RADIUS+1),MARGIN_TOP,parseInt(RS[1]/10));
					}
					if(parseInt(nextRS[1]%10)!=parseInt(RS[1]%10)){
						addBalls(MARGIN_LEFT+54*(RADIUS+1),MARGIN_TOP,parseInt(RS[1]%10));
					}
					if(parseInt(nextRS[2]/10)!=parseInt(RS[2]/10)){
						addBalls(MARGIN_LEFT+78*(RADIUS+1),MARGIN_TOP,parseInt(RS[2]/10));
					}
					if(parseInt(nextRS[2]%10)!=parseInt(RS[2]%10)){
						addBalls(MARGIN_LEFT+93*(RADIUS+1),MARGIN_TOP,parseInt(RS[2]%10));
					}
					RS=nextRS;
				}
				updateBalls();
				//console.log(balls.length);
			}
			function addBalls(x,y,num){
				for(var i=0,len=digit[num].length;i<len;i++){
					for(var j=0,_len=digit[num][i].length;j<_len;j++){
						if(digit[num][i][j]===1){
							var aBall={
								x:x+2*(j+1)*(RADIUS+1),
								y:y+2*(i+1)*(RADIUS+1),
								g:1+Math.random(),
								vx:Math.pow(-1,Math.ceil(Math.random()*1000))*4,
								vy:-5,
								color:colors[Math.floor(Math.random()*colors.length)]
							}
							balls.push(aBall);
						}
					}
				}
			}
			function updateBalls(){
				
				for(var i=0;i<balls.length;i++){
					balls[i].x+=balls[i].vx;
					balls[i].y+=balls[i].vy;
					balls[i].vy+=balls[i].g;
					if(balls[i].y>=WINDDOW_HEIGHT-RADIUS){
						balls[i].y=WINDDOW_HEIGHT-RADIUS;
						balls[i].vy= -balls[i].vy*0.75;
					}
				}
				var c=0;
				for(var i=0;i<balls.length;i++){
					if(balls[i].x+RADIUS>0 && balls[i].x-RADIUS<WINDOW_WIDTH){
						balls[c++]=balls[i];
					}
				}
				
				balls=balls.slice(0,c+1);
				//if(balls.length>300) balls=balls.slice(balls.length-300);
			}
	</script>
</body>
</html>